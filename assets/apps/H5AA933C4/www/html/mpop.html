<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>代码精灵</title>
		<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<script src="../js/mui.min.js"></script>

		<link rel="stylesheet" href="../css/mui.min.css">
		 
		<style>
			body,
			.mui-content {
				background-color: #F23038;
				color: #fff;
			}

			.top_con {
				padding-top: 10px;
				padding-left: 20px;
				padding-right: 20px;
				padding-bottom: 5px;
			}

			.clobtn {
				background-color: #fff;
				height: 32px;
				padding-top: 4px;
				font-size: 16px;
			}

			td {
				font-size: 15px;
				text-align: left;
				line-height: 28px;
				 padding: 3px 5px 3px 0px; 
				border: 0px;
				border-bottom: 1px solid #bd0000; */
				color: #d4d4d4;
				background-color: #F23038;
			}
 
			td:hover {
				color: #fff;
				padding: 3px 5px 3px 0px; 
				background-color: #ff5500;
				border: 0px solid #F0AD4E;
				border-bottom: 1px solid #bd0000; */
				cursor: pointer;
			}
			
			 
		</style>
	</head>
	<body style="background-color: #F23038;">
		<div class="mui-content">

			<div class="top_con">
				<button id="close-btn" type="button" class="mui-btn mui-btn-block clobtn">关闭</button>
			</div>

			<div>
				<table id="poptable" style="margin-left: 20px;width: 90%;margin-right:5px;">
 
					<tr><td id="me_pz0">上海 螺纹钢 rb2405</td><td></td></tr>
					<tr><td id="me_pz1">上海 铁矿 i2301</td></tr>
					<tr><td id="me_pz2">上海 乙二醇 eg2301</td></tr>
					<tr><td id="me_pz3">上海 乙二醇 eg2301</td></tr>
					<tr><td id="me_pz4">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz5">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz6">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz7">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz8">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz9">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz10">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz11">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz12">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz13">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz14">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz15">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz16">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz17">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz18">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz19">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz20">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz21">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz22">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz23">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz24">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz25">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz26">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz27">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz28">乙二醇 eg2301</td></tr>
					
					<tr><td id="me_pz29">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz30">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz31">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz32">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz33">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz34">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz35">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz36">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz37">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz38">乙二醇 eg2301</td></tr>
					<tr><td id="me_pz39"></td></tr>
					<tr><td id="me_pz40"></td></tr>
					<tr><td id="me_pz41"></td></tr>
					<tr><td id="me_pz42"></td></tr>
					<tr><td id="me_pz43"></td></tr>
					<tr><td id="me_pz44"></td></tr>
					<tr><td id="me_pz45"></td></tr>
					<tr><td id="me_pz46"></td></tr>
					<tr><td id="me_pz47"></td></tr>
					<tr><td id="me_pz48"></td></tr>
					<tr><td id="me_pz49"></td></tr>
					<tr><td id="me_pz50"></td></tr>
					<tr><td id="me_pz51"></td></tr>
					<tr><td id="me_pz52"></td></tr>
					<tr><td id="me_pz53"></td></tr>
					<tr><td id="me_pz54"></td></tr>
					<tr><td id="me_pz55"></td></tr>
					<tr><td id="me_pz56"></td></tr>
					<tr><td id="me_pz57"></td></tr>
					<tr><td id="me_pz58"></td></tr>
					<tr><td id="me_pz59"></td></tr>
 			
				</table>
			</div>
		</div>
		
		<script type="text/javascript" charset="utf-8">
			
			mui.init({
				keyEventBind: {
					backbutton: false,
					menubutton: false
				}
			});
			//获得侧滑主窗口webview对象
			var main = null;
			var self = null;
			var iweb;
			mui.plusReady(function() {
				main = plus.webview.currentWebview().opener();
				self = plus.webview.currentWebview();
				iweb=self.iwin;
				
				var local_codelist = localStorage.getItem("jfx9_codelist");
				var data = splitMenuData(local_codelist);
				//更新表格
				// alert(data.rname);
				for (var i = 0; i < 60; i++) {
					if ( i<= (data.rcode.length-1) ){
							var strcode;
							var strname;
							var strmat;
							strcode = data.rcode[i];
							strname = data.rname[i];
							strmat = data.rmat[i];
							if ((typeof(strcode) != 'undefined') && (strcode != null)) {
									document.getElementById("me_pz"+i).innerText = strname+" "+strcode;
							}
					} else {
						   document.getElementById("me_pz"+i).style.display = "none";
					}
 
				}
				
				
			})
			
			

			function closeMenu() {
				mui.fire(main, "menu:swipeleft");
			}
			//优化显示出来的侧滑菜单，只需监听该菜单的左滑事件，然后将其关闭即可；在菜单上右滑，不做任何操作；
			/* window.addEventListener("swipeleft", closeMenu); */
			document.getElementById("close-btn").addEventListener('tap', closeMenu);
			mui.menu = closeMenu;
			
			mui('#poptable').on('click', 'td', function() {
				//alert("ddd");
				var txt;
				txt = this.innerText;
				var txt2 = txt.split(" ");
				var xname, xcode;
				xname = txt2[0];
				xcode = txt2[1];
				 
				if (iweb == "dpz_zlt") {
					//转向单品种-2 页面
					//  alert("4: "+iweb+xname+xcode);
					var web_dpz_zlt = plus.webview.getWebviewById("dpz-4.html");
					mui.fire(web_dpz_zlt, 'btn_ghcode', {
						code: xcode,
						name: xname
					});
				
				} else if (iweb == "dpz_fxb") {
					//转向单品种-2 页面
					// alert("5: "+iweb+xname+xcode);
					var web_dpz_fxb = plus.webview.getWebviewById("dpz-5.html");
					mui.fire(web_dpz_fxb, 'btn_ghcode', {
						code: xcode,
						name: xname
					});
				
				}  else if (iweb == "dpz_kx") {
					//转向单品种-2 页面
					// alert("5: "+iweb+xname+xcode);
					var web_dpz_fxb = plus.webview.getWebviewById("dpz-3.html");
					mui.fire(web_dpz_fxb, 'btn_ghcode', {
						code: xcode,
						name: xname
					});
				
				} else if (iweb == "top_cc") {
					//转向top-1 页面
					// 
					var web_top_cc = plus.webview.getWebviewById("top-1.html");
					mui.fire(web_top_cc, 'btn_ghcode', {
						code: xcode,
						name: xname
					});
				
				} else if (iweb == "top_xw") {
					//转向top-1 页面
					// 
					var web_top_xw = plus.webview.getWebviewById("top-2.html");
					mui.fire(web_top_xw, 'btn_ghcode', {
						code: xcode,
						name: xname
					});
				
				} else if (iweb == "zn_lh") {
					//转向zn-3 页面
					// 
					var web_zn_lh = plus.webview.getWebviewById("zn-3.html");
					mui.fire(web_zn_lh, 'btn_ghcode', {
						code: xcode,
						name: xname
					});
				
				}
				
				
				
				
			})	
			
			function splitMenuData(rawData) {
				var rcode = [];
				var rname = [];
				var rmat = [];
				var rawData2;
				rawData2 = rawData.split("\n");
				var xline ;
				for (var i = 0; i < rawData2.length; i++) {
					//rawstr = rawData2[i].replace(/[\r\n]/g,'')
					xline = rawData2[i].replace(/[\r\n]/g,'').split(",");
				 
					if (xline[0] == "sc"){
						rcode.push(xline[1]); //+" "+ xline[1]
						rname.push( xline[2]  );
						rmat.push("上期");
					} 
				}
				
				for (var i = 0; i < rawData2.length; i++) {
					xline = rawData2[i].replace(/[\r\n]/g,'').split(",");
					if (xline[0] == "zc"){
						rcode.push(xline[1]); //+" "+ xline[1]
						rname.push(xline[2]);
						rmat.push("郑商");
					} 
				}
				
				for (var i = 0; i < rawData2.length; i++) {
					xline = rawData2[i].replace(/[\r\n]/g,'').split(",");
					if (xline[0] == "dc"){
						rcode.push(xline[1]); //+" "+ xline[1]
						rname.push(xline[2]);
						rmat.push("大商");
					} 
				}
				
				for (var i = 0; i < rawData2.length; i++) {
					xline = rawData2[i].replace(/[\r\n]/g,'').split(",");
					if (xline[0] == "ny"){
						rcode.push(xline[1]); //+" "+ xline[1]
						rname.push(xline[2]);
						rmat.push("能源");
					} 
				}
				
				
				return {
					rcode: rcode,
					rname: rname,
					rmat: rmat
				};
			}
			
			
		</script>
	</body>

</html>
