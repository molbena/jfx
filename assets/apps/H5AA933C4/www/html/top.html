<!DOCTYPE html>
<html>
	<head>
		<title>TOP</title>
		<meta charset="utf-8">
		<meta http-equiv="Access-Control-Allow-Origin" content="*" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />

		<script src="../js/mui.min.js"></script>
		<link href="../css/mui.css" rel="stylesheet" />
		<link href="../css/index.css" rel="stylesheet" id="indexcss"/>
		<link href="../css/page.css" rel="stylesheet" />
	</head>
	<body id="main_bg" class="body_bg">
		<div class="dpz_head">
			<div class="mui-segmented-control" id="segmentedControl">
				<a id="tab1" class="mui-control-item mui-active" data-wid="top-1.html">持仓</a>
				<a id="tab2" class="mui-control-item" data-wid="top-2.html">富赢</a>
			    <a id="tab3" class="mui-control-item" data-wid="top-3.html">持仓全景</a>
				<a id="tab4" class="mui-control-item" data-wid="top-4.html">席位全景</a> 

			</div>

		</div>



		<script>
			 mui.init({
				swipeBack: false, //启用右滑关闭功能
				keyEventBind: {
					backbutton: true, //Boolean(默认true)关闭back按键监听
					swipe: true //默认为true
					//menubutton: false //Boolean(默认true)关闭menu按键监听
				}
			});
			var subwin = ['top-1.html', 'top-2.html','top-3.html', 'top-4.html'];
			var activeTab = subwin[0];
			
			mui.plusReady(function() {
			
				var _self = plus.webview.currentWebview();
				inh = _self.innerH;
				inw = _self.innerW;
				//alert(inh); 				
				for (var i = 0; i < 4; i++) {
					var sub = plus.webview.create(subwin[i], subwin[i], {
						top: "33px",
						width: "100%",
						//height: inh - 107,
						bottom: "51px",
						popGesture: "none"
					},{
						innerH: inh,
						innerW: inw
					});
					//wc.show("fade-in", 200);
					if (i > 0) {
						sub.hide();
					}
				}
			
			
				mui(".mui-segmented-control").on("tap", ".mui-control-item", function(e) {
					mui.alert("非此版本功能", "提示", "关闭");
				});
			
				document.addEventListener('showactive', function(event) {
					mui.alert("非此版本功能", "提示", "关闭"); 
			
				});
				

				
				document.addEventListener('hideactive', function(event) {
					// alert("2");
					plus.webview.hide(activeTab);
				});
				
				document.addEventListener('showactive_i', function(event) {
					 
					var newTab; 
					var current = document.querySelector(".mui-segmented-control>.mui-control-item.mui-active");
					
					var x_i = event.detail.ii;
					if (x_i=="1"){
						activeTab="top-1.html";
						newTab=document.getElementById("tab1");
					} else if (x_i=="2"){
						activeTab="top-2.html";
						newTab=document.getElementById("tab2");
					} else if (x_i=="3"){
						activeTab="top-3.html";
						newTab=document.getElementById("tab3");
					} else if (x_i=="4"){
						activeTab="top-4.html";
						newTab=document.getElementById("tab4");
					}  
					if (newTab !== current) {
						current.classList.remove('mui-active');
						newTab.classList.add('mui-active');
					}
					 plus.webview.show(activeTab, "fade-in", 100);
					 
					 if ( (activeTab == "top-1.html") || (activeTab == "top-2.html")  ){
						 var ac_page = plus.webview.getWebviewById(activeTab); 
						 mui.fire(ac_page, 'begin_i');
					 }
					 
				
				});
				
			
			});  
		</script>
	</body>
</html>
